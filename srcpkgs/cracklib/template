# Template file for 'cracklib'
pkgname=cracklib
version=2.10.3
revision=1
create_wrksrc=yes
build_style=gnu-configure
configure_args="--disable-static"
hostmakedepends="libtool automake gettext-devel"
short_desc="Password Checking Library"
maintainer="Orphaned <orphan@voidlinux.org>"
license="LGPL-2.1-or-later"
homepage="https://github.com/cracklib/cracklib"
distfiles="https://github.com/cracklib/cracklib/releases/download/v${version}/cracklib-${version}.tar.gz
 https://github.com/cracklib/cracklib/releases/download/v${version}/cracklib-words-${version}.gz"
checksum="877b823198eb29aa1778b16a70cad05f7b54b164b3bf7ab656fc326c393f4c85
 1d9dd4d8eed30520d83c0f331ac8ddad5b0c78b9fe8a4f456edbba7b6f871250"

lib32disabled=yes

post_extract() {
	mv cracklib-${version}/* .
}

pre_configure() {
	autoreconf -fi
}

post_install() {
	vinstall cracklib-words-${version} 644 usr/share/cracklib cracklib-words
}

cracklib-devel_package() {
	depends="zlib-devel libcracklib-${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
	}
}

libcracklib_package() {
	short_desc+=" - runtime library"
	pkg_install() {
		vmove "usr/lib/*.so*"
	}
}
